(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0HMw":function(e,t,n){},"6nbB":function(e,t,n){var l=n("mp5j");e.exports=(l.default||l).template({1:function(e,t,n,l,a){var i,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n<li class="film-list-item" data-id="'+u(typeof(o=null!=(o=d(n,"id")||(null!=t?d(t,"id"):t))?o:r)===c?o.call(s,{name:"id",hash:{},data:a,loc:{start:{line:3,column:36},end:{line:3,column:42}}}):o)+'">\n    <picture>\n'+(null!=(i=d(n,"if").call(s,null!=t?d(t,"poster_path"):t,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.program(4,a,0),data:a,loc:{start:{line:5,column:8},end:{line:12,column:15}}}))?i:"")+'    </picture>\n    <h3 class="film-name">"'+u(typeof(o=null!=(o=d(n,"title")||(null!=t?d(t,"title"):t))?o:r)===c?o.call(s,{name:"title",hash:{},data:a,loc:{start:{line:14,column:27},end:{line:14,column:36}}}):o)+'"</h3>\n    <p class="film-about">'+u(typeof(o=null!=(o=d(n,"genre_ids")||(null!=t?d(t,"genre_ids"):t))?o:r)===c?o.call(s,{name:"genre_ids",hash:{},data:a,loc:{start:{line:15,column:26},end:{line:15,column:39}}}):o)+" | "+u(typeof(o=null!=(o=d(n,"release_date")||(null!=t?d(t,"release_date"):t))?o:r)===c?o.call(s,{name:"release_date",hash:{},data:a,loc:{start:{line:15,column:42},end:{line:15,column:58}}}):o)+' <span class="mark">'+u(typeof(o=null!=(o=d(n,"vote_average")||(null!=t?d(t,"vote_average"):t))?o:r)===c?o.call(s,{name:"vote_average",hash:{},data:a,loc:{start:{line:15,column:78},end:{line:15,column:94}}}):o)+"</span></p>\n</li>\n"},2:function(e,t,n,l,a){var i,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <source srcset="http://image.tmdb.org/t/p/w220_and_h330_face/'+r("function"==typeof(i=null!=(i=c(n,"poster_path")||(null!=t?c(t,"poster_path"):t))?i:s)?i.call(o,{name:"poster_path",hash:{},data:a,loc:{start:{line:6,column:69},end:{line:6,column:84}}}):i)+'" media="(min-width: 320px)" />\n        <source srcset="http://image.tmdb.org/t/p/w440_and_h660_face/'+r("function"==typeof(i=null!=(i=c(n,"poster_path")||(null!=t?c(t,"poster_path"):t))?i:s)?i.call(o,{name:"poster_path",hash:{},data:a,loc:{start:{line:7,column:69},end:{line:7,column:84}}}):i)+'" media="(min-width: 768px)" />\n        <source srcset="https://image.tmdb.org/t/p/w500/'+r("function"==typeof(i=null!=(i=c(n,"poster_path")||(null!=t?c(t,"poster_path"):t))?i:s)?i.call(o,{name:"poster_path",hash:{},data:a,loc:{start:{line:8,column:56},end:{line:8,column:71}}}):i)+'" media="(min-width: 1200px)" />\n        <img class="film-image" src="http://image.tmdb.org/t/p/w440_and_h660_face/'+r("function"==typeof(i=null!=(i=c(n,"poster_path")||(null!=t?c(t,"poster_path"):t))?i:s)?i.call(o,{name:"poster_path",hash:{},data:a,loc:{start:{line:9,column:82},end:{line:9,column:97}}}):i)+'" alt="film poster">\n'},4:function(e,t,n,l,a){return'        <img class="film-image" style="height:auto" src="https://static.toiimg.com/photo/msid-67586673/67586673.jpg?3918697" alt="film poster">\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,l,a){var i;return null!=(i=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:0},end:{line:17,column:9}}}))?i:""},useData:!0})},"9TK4":function(e,t,n){var l=n("mp5j");e.exports=(l.default||l).template({1:function(e,t,n,l,a){var i,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img class="film-image" src="http://image.tmdb.org/t/p/w440_and_h660_face/'+e.escapeExpression("function"==typeof(i=null!=(i=o(n,"poster_path")||(null!=t?o(t,"poster_path"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"poster_path",hash:{},data:a,loc:{start:{line:2,column:74},end:{line:2,column:89}}}):i)+'" alt="Фильм" />\n'},3:function(e,t,n,l,a){return'<img class="film-image" style="height:auto" src="https://static.toiimg.com/photo/msid-67586673/67586673.jpg?3918697" alt="film poster">\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,l,a){var i,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(i=d(n,"if").call(s,null!=t?d(t,"poster_path"):t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a,loc:{start:{line:1,column:0},end:{line:5,column:7}}}))?i:"")+'<div class="info-section">\n  <h2 class="title">'+u(typeof(o=null!=(o=d(n,"title")||(null!=t?d(t,"title"):t))?o:r)===c?o.call(s,{name:"title",hash:{},data:a,loc:{start:{line:7,column:20},end:{line:7,column:29}}}):o)+'</h2>\n  <div class="modal-info">\n    <ul class="list-info">\n      <li>\n        <p class="about-film">Vote / Votes</p>\n      </li>\n      <li>\n        <p class="about-film">Popularity</p>\n      </li>\n      <li>\n        <p class="about-film">Original Title</p>\n      </li>\n      <li>\n        <p class="about-film genre">Genre</p>\n      </li>\n    </ul>\n    <ul class="list-info">\n      <li>\n        <p class="about-film-info">\n          <span class="about-film-vote">'+u(typeof(o=null!=(o=d(n,"vote_average")||(null!=t?d(t,"vote_average"):t))?o:r)===c?o.call(s,{name:"vote_average",hash:{},data:a,loc:{start:{line:26,column:40},end:{line:26,column:56}}}):o)+"</span> / "+u(typeof(o=null!=(o=d(n,"vote_count")||(null!=t?d(t,"vote_count"):t))?o:r)===c?o.call(s,{name:"vote_count",hash:{},data:a,loc:{start:{line:26,column:66},end:{line:26,column:80}}}):o)+'\n        </p>\n      </li>\n      <li>\n        <p class="about-film-info">'+u(typeof(o=null!=(o=d(n,"popularity")||(null!=t?d(t,"popularity"):t))?o:r)===c?o.call(s,{name:"popularity",hash:{},data:a,loc:{start:{line:30,column:35},end:{line:30,column:49}}}):o)+'</p>\n      </li>\n      <li>\n        <p class="about-film-info original-title">'+u(typeof(o=null!=(o=d(n,"title")||(null!=t?d(t,"title"):t))?o:r)===c?o.call(s,{name:"title",hash:{},data:a,loc:{start:{line:33,column:50},end:{line:33,column:59}}}):o)+'</p>\n      </li>\n      <li>\n        <p class="about-film-info">'+u(typeof(o=null!=(o=d(n,"genre_ids")||(null!=t?d(t,"genre_ids"):t))?o:r)===c?o.call(s,{name:"genre_ids",hash:{},data:a,loc:{start:{line:36,column:35},end:{line:36,column:48}}}):o)+'</p>\n      </li>\n    </ul>\n  </div>\n  <div>\n    <h3 class="subtitle">ABOUT</h3>\n    <p class="description">"'+u(typeof(o=null!=(o=d(n,"overview")||(null!=t?d(t,"overview"):t))?o:r)===c?o.call(s,{name:"overview",hash:{},data:a,loc:{start:{line:42,column:28},end:{line:42,column:40}}}):o)+'"</p>\n  </div>\n  <button class="first add-btn" type="button">ADD TO WATCHED</button>\n  <button class="second add-btn" type="button">ADD TO QUEUE</button>\n</div>'},useData:!0})},QfWi:function(e,t,n){"use strict";n.r(t);n("0HMw");var l={API:"2d536748299a0654176fee96f4763797",defaultURL:"https://api.themoviedb.org/3/movie/popular",defaultSearch:"https://api.themoviedb.org/3/search/movie",genres:[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],filmList:document.querySelector(".film-list"),errorNotification:document.querySelector(".search-error"),modal:document.querySelector(".modal-section")};var a=async function(e){let t=[];const n=[];return await e.then(e=>{t=[...e.results];let a="";t.forEach(e=>{const t={};t.id=e.id,t.popularity=e.popularity,t.poster_path=e.poster_path,t.title=e.title,a="";let i=[];[...e.genre_ids].forEach(e=>{l.genres.forEach(t=>{e===t.id&&i.push(t.name)})}),a=i.join(", "),t.genre_ids=a,t.overview=e.overview,t.vote_average=e.vote_average,t.vote_count=e.vote_count,t.release_date=e.release_date.split("-")[0],n.push(t)})}).catch(e=>console.log(e)),n},i=function(e=1,t=!1){return new Promise((n,a)=>{t||fetch(`${l.defaultURL}?api_key=${l.API}&page=${e}`).then(e=>(e.ok||a(new Error(`Помилка в запиті до сервера  [error code - ${e.status}]`)),e)).then(e=>e.json()).then(e=>{if(e.results.length>0)return e;throw"Масив з данними пустий [запит виконано]"}).then(e=>n(e)).catch(e=>console.log("ошибка")),t&&fetch(`${l.defaultSearch}?api_key=${l.API}&page=${e}&query=${t}&include_adult=false`).then(e=>(e.ok||a(new Error(`Помилка в запиті до сервера  [error code - ${e.status}]`)),e)).then(e=>e.json()).then(e=>{if(e.results.length>0)return e;throw"Масив з данними пустий [запит виконано]"}).then(e=>n(e)).catch(e=>l.errorNotification.classList.remove("is-hidden"))})};var o=function(e){let t=[];return document.documentElement.clientWidth<767&&(t=e.slice(0,4)),document.documentElement.clientWidth>=768&&document.documentElement.clientWidth<1024&&(t=e.slice(0,8)),document.documentElement.clientWidth>=1024&&(t=e.slice(0,9)),t},s=n("6nbB"),r=n.n(s);const c=document.querySelector(".main");var u=function(e){c.innerHTML='\n    <ul class="film-list">\n    </ul>\n    ';const t=document.querySelector(".film-list"),n=r()(e);t.innerHTML=n},d=n("9TK4"),m=n.n(d),p=n("QJ3N"),h=(n("zrP5"),n("bzha"),function(e){document.querySelector(".film-list").addEventListener("click",t=>{let n;t.path.forEach(t=>{if("film-list-item"===t.className){const l=+t.dataset.id;n=e.find(e=>e.id===l),document.body.classList.add("stop-scroll");document.querySelector(".modal-section").innerHTML=m()(n)}});const l=document.querySelector(".backdrop");l.classList.remove("is-hidden"),function(e){const t=document.querySelector(".first"),n=document.querySelector(".second"),l=JSON.parse(localStorage.getItem("w"))||[],a=JSON.parse(localStorage.getItem("q"))||[],i=()=>{Object(p.error)({title:"You already added this movie !",text:"Please choose another one !",delay:1200})},o=()=>{Object(p.success)({title:"You added this movie !",text:"Enjoy watching the movie !",delay:1200})};t.addEventListener("click",(function(){let t=!0;if(l.forEach(n=>{n.id===e.id&&(t=!1)}),t){l.push(e);let t=JSON.stringify(l);localStorage.setItem("w",t),o()}else i()})),n.addEventListener("click",(function(){let t=!0;if(a.forEach(n=>{n.id===e.id&&(t=!1)}),t){a.push(e);let t=JSON.stringify(a);localStorage.setItem("q",t),o()}else i()}))}(n);const a=document.querySelector(".title");a.addEventListener("click",()=>{var t,n;t=a.textContent,n=e[elId].release_date,fetch(`https://youtube.googleapis.com/youtube/v3/search?q=${t+" "+n+" trailer"}&key=AIzaSyC2bl8RG1baEBqc2I1X_QiZQWc1V6oCfTU`).then(e=>e.json()).then(e=>{const t=e.items[0].id.videoId;document.querySelector(".modal-section").innerHTML=`<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/${t}?controls=0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`})});const i=function(e){console.log(e.key),"Escape"===e.key&&(l.classList.add("is-hidden"),document.body.classList.remove("stop-scroll"),window.removeEventListener("keydown",i))};window.addEventListener("keydown",i),l.addEventListener("click",e=>{e.target===e.currentTarget&&(window.removeEventListener("keydown",i),document.body.classList.remove("stop-scroll"),l.classList.add("is-hidden"))});document.querySelector(".close-modal-btn").addEventListener("click",e=>{window.removeEventListener("keydown",i),document.body.classList.remove("stop-scroll"),l.classList.add("is-hidden")})})}),f=n("2c84"),g=n.n(f),v=(n("lUE2"),async function(e=!1,t){const n=await t;let l=1;const o=document.documentElement.clientWidth;let s=5,r=4;o>=768&&o<1024?(r=8,s=7):o>=1024&&(r=9,s=7);//! перший пагінатор генеруємо при рендері main.page
//! потрібна перевірка на ширину вікна, і передаємо ці данні в опції пагінатора
new g.a("pagination",{totalItems:n,itemsPerPage:r,visiblePages:s});const c={pagination:document.querySelector("#pagination")};c.pagination.addEventListener("click",(function t(o){c.pagination.removeEventListener("click",t);if(!(([...e])=>e.includes("tui-is-disabled"))(o.target.classList)){if("next"===o.target.textContent)l+=1;else if("prev"===o.target.textContent)l-=1;else if("..."===o.target.textContent){let e=[...o.currentTarget.children].find(e=>"tui-page-btn tui-is-selected"==e.className);l=Number(e.textContent)}else l="last"===o.target.textContent?n/r:"first"===o.target.textContent?1:Number(o.target.textContent)||l;(async function(t){let n=[];//! елементи на 2(двох) сторінка на сервері --->  [FALSE]
t.isElementsOnPageBefore||await a(i(""+t.currentPageOnServer,e)).then(e=>n=[...e.slice(t.firstIndexOfElements,t.lastIndexOfElements)]);//! елементи на 2(двох) сторінка на сервері --->  [TRUE]
t.isElementsOnPageBefore&&await async function(){return[await a(i(""+(t.currentPageOnServer-1),e)).then(e=>e.slice(t.firstIndexOfElements)),await a(i(""+t.currentPageOnServer,e)).then(e=>e.slice(0,t.lastIndexOfElements))]}().then(e=>{e.forEach(e=>n.push(...e))}),u(n),h(n)})(function(){const e={currentPageOnServer:1,ElementsOnCurrentPage:0,isElementsOnPageBefore:!1,ElementsOnPageBefore:0,firstIndexOfElements:0,lastIndexOfElements:0};return function(e){return l*r>20?(this.currentPageOnServer=Math.ceil(l*r/20),this.ElementsOnCurrentPage=l*r%20,this.ElementsOnCurrentPage>=r?(this.firstIndexOfElements=this.ElementsOnCurrentPage-r,this.lastIndexOfElements=this.ElementsOnCurrentPage):0===this.ElementsOnCurrentPage?(this.firstIndexOfElements=20-r,this.lastIndexOfElements=20):(this.isElementsOnPageBefore=!0,this.ElementsOnPageBefore=r-this.ElementsOnCurrentPage,this.firstIndexOfElements=20-this.ElementsOnPageBefore,this.lastIndexOfElements=this.ElementsOnCurrentPage)):(this.lastIndexOfElements=l*r,this.lastIndexOfElements-r<0?this.firstIndexOfElements=0:this.firstIndexOfElements=this.lastIndexOfElements-r),e}.call(e,e)}())}c.pagination.addEventListener("click",t)}))});const y=async function(){return await i(1)};a(y()).then(e=>o(e)).then(e=>{u(e),h(e),v(!1,y().then(e=>e.total_results))});document.querySelector(".search-error"),document.querySelector(".search-error");const b=document.querySelector("input");document.querySelector("form").addEventListener("submit",e=>{e.preventDefault(),l.errorNotification.classList.add("is-hidden");const t=function(e){if(""!==e)return i(1,e);alert("Введите запрос!")}(b.value);a(t).then(e=>o(e)).then(e=>{u(e),h(e),v(b.value,t.then(e=>e.total_results))})});const E=document.querySelector(".lib-link"),w=document.querySelector(".header"),_=function(){document.querySelector(".watched").classList.add("current-btn"),document.querySelector(".queue").classList.remove("current-btn");let e=JSON.parse(localStorage.getItem("w"))||[];e=o(e),u(e),h(e)},O=function(){document.querySelector(".watched").classList.remove("current-btn"),document.querySelector(".queue").classList.add("current-btn");let e=JSON.parse(localStorage.getItem("q"))||[];e=o(e),u(e),h(e)};E.addEventListener("click",(function(){w.innerHTML='   <div class="container lib-container">\n\n    <div class="header-container">\n      <div class="header-logo-container">\n        <a href="./index.html" class="logo-link">\n          <svg width="24" height="24">\n            <use href="./images/sprite.svg#icon-film"></use>\n          </svg>\n        </a>\n        <p class="logo-text">Filmoteka</p>\n      </div>\n      <div class="header-nav-container">\n        <nav class="header-nav">\n          <ul class="nav-list">\n            <li class="nav-item">\n              <a href="./index.html" class="link ">HOME</a>\n            </li>\n            <li class="nav-item">\n               <button class="lib-link current" type="button">MY LIBRARY</button>\n            </li>\n          </ul>\n        </nav>\n      </div>\n    </div>\n\n    <div class="btn-container">\n      <button class="lib-btn watched">Watched</button>\n      <button class="lib-btn queue">Queue</button>\n    </div>\n  </div>',_(),document.querySelector(".watched").addEventListener("click",_),document.querySelector(".queue").addEventListener("click",O)}))}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.af2ae90d46db8326549c.js.map